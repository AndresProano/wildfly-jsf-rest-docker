services:
  rest-service:
    image: byandyx/deber1-rest-server:latest
    container_name: rest-container
    build:
      context: ./app-rest
    ports:
      - "8081:8080"
    healthcheck:
      test: ["CMD-SHELL", "bash -c 'echo > /dev/tcp/localhost/8080'"]
      interval: 10s
      timeout: 5s
      retries: 12

  jsf-service:
    image: byandyx/deber1-jsf-server:latest
    container_name: jsf-container
    build:
      context: ./app-jsf
    ports:
      - "8080:8080"
    environment:
      - REST_BASE_URL=http://rest-service:8080/api
    depends_on:
      rest-service:
        condition: service_healthy
